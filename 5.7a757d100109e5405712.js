(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{YBVt:function(t,e,n){"use strict";n.r(e);var c=n("Ip0R"),i=n("4TcP"),o=n("ZYCi"),r=n("CcnG"),a=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-contacts"]],decls:1,vars:0,template:function(t,e){1&t&&r.Kb(0,"router-outlet")},directives:[o.g],encapsulation:2,changeDetection:0}),t}(),s=n("mrSG"),u=n("6onV"),b=function(t){return t[t.EntitiesOnly=0]="EntitiesOnly",t[t.Both=1]="Both",t[t.None=2]="None",t}({});function f(t){return function(e,n){var c={ids:Object(s.d)(n.ids),entities:Object(s.a)({},n.entities)},i=t(e,c);return i===b.Both?Object.assign({},n,c):i===b.EntitiesOnly?Object(s.a)({},n,{entities:c.entities}):n}}function p(t,e){var n=e(t);return Object(r.T)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",e.toString()),n}function d(t){function e(e,n){var c=p(e,t);return c in n.entities?b.None:(n.ids.push(c),n.entities[c]=e,b.Both)}function n(t,n){var c,i,o=!1;try{for(var r=Object(s.e)(t),a=r.next();!a.done;a=r.next())o=e(a.value,n)!==b.None||o}catch(u){c={error:u}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(c)throw c.error}}return o?b.Both:b.None}function c(t,e){var n=(t instanceof Array?t:e.ids.filter((function(n){return t(e.entities[n])}))).filter((function(t){return t in e.entities})).map((function(t){return delete e.entities[t]})).length>0;return n&&(e.ids=e.ids.filter((function(t){return t in e.entities}))),n?b.Both:b.None}function i(e,n){var c={};return(e=e.filter((function(t){return t.id in n.entities}))).length>0?e.filter((function(e){return function(e,n,c){var i=Object.assign({},c.entities[n.id],n.changes),o=p(i,t),r=o!==n.id;return r&&(e[n.id]=o,delete c.entities[n.id]),c.entities[o]=i,r}(c,e,n)})).length>0?(n.ids=n.ids.map((function(t){return c[t]||t})),b.Both):b.EntitiesOnly:b.None}function o(e,c){var o,r,a=[],u=[];try{for(var f=Object(s.e)(e),d=f.next();!d.done;d=f.next()){var l=d.value,h=p(l,t);h in c.entities?u.push({id:h,changes:l}):a.push(l)}}catch(g){o={error:g}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(o)throw o.error}}var m=i(u,c),v=n(a,c);switch(!0){case v===b.None&&m===b.None:return b.None;case v===b.Both||m===b.Both:return b.Both;default:return b.EntitiesOnly}}return{removeAll:function(t){return Object.assign({},t,{ids:[],entities:{}})},addOne:f(e),addMany:f(n),addAll:f((function(t,e){return e.ids=[],e.entities={},n(t,e),b.Both})),updateOne:f((function(t,e){return i([t],e)})),updateMany:f(i),upsertOne:f((function(t,e){return o([t],e)})),upsertMany:f(o),removeOne:f((function(t,e){return c([t],e)})),removeMany:f(c),map:f((function(t,e){return i(e.ids.reduce((function(n,c){var i=t(e.entities[c]);return i!==e.entities[c]&&n.push({id:c,changes:i}),n}),[]).filter((function(t){return t.id in e.entities})),e)}))}}var l=Object(u.o)("[Contacts] Load all"),h=Object(u.o)("[Contacts] Load",Object(u.t)()),m=Object(u.o)("[Contacts] Create",Object(u.t)()),v=Object(u.o)("[Contacts] Update",Object(u.t)()),g=Object(u.o)("[Contacts] Remove",Object(u.t)()),O=Object(u.o)("[Contacts] Page Change",Object(u.t)()),y=Object(u.o)("[Contacts] Contacts filter",Object(u.t)()),j=Object(u.o)("[Contacts] Load all success",Object(u.t)()),C=Object(u.o)("[Contacts] Load success",Object(u.t)()),M=Object(u.o)("[Contacts] Create success",Object(u.t)()),L=Object(u.o)("[Contacts] Update success",Object(u.t)()),w=Object(u.o)("[Contacts] Remove success",Object(u.t)()),I=Object(u.o)("[Contacts] Failure",Object(u.t)()),F=function(t){void 0===t&&(t={});var e=Object(s.a)({sortComparer:!1,selectId:function(t){return t.id}},t),n=e.selectId,c=e.sortComparer,i={getInitialState:function(t){return void 0===t&&(t={}),Object.assign({ids:[],entities:{}},t)}},o={getSelectors:function(t){var e=function(t){return t.ids},n=function(t){return t.entities},c=Object(u.r)(e,n,(function(t,e){return t.map((function(t){return e[t]}))})),i=Object(u.r)(e,(function(t){return t.length}));return t?{selectIds:Object(u.r)(t,e),selectEntities:Object(u.r)(t,n),selectAll:Object(u.r)(t,c),selectTotal:Object(u.r)(t,i)}:{selectIds:e,selectEntities:n,selectAll:c,selectTotal:i}}},r=c?function(t,e){var n=d(t);function c(e,n){var c=e.filter((function(e){return!(p(e,t)in n.entities)}));return 0===c.length?b.None:(r(c,n),b.Both)}function i(e,n){var c=[],i=e.filter((function(e){return function(e,n,c){if(!(n.id in c.entities))return!1;var i=Object.assign({},c.entities[n.id],n.changes),o=p(i,t);return delete c.entities[n.id],e.push(i),o!==n.id}(c,e,n)})).length>0;if(0===c.length)return b.None;var o=n.ids,a=[];return n.ids=n.ids.filter((function(t,e){return t in n.entities||(a.push(e),!1)})),r(c,n),!i&&a.every((function(t){return n.ids[t]===o[t]}))?b.EntitiesOnly:b.Both}function o(e,n){var o,r,a=[],u=[];try{for(var f=Object(s.e)(e),d=f.next();!d.done;d=f.next()){var l=d.value,h=p(l,t);h in n.entities?u.push({id:h,changes:l}):a.push(l)}}catch(g){o={error:g}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(o)throw o.error}}var m=i(u,n),v=c(a,n);switch(!0){case v===b.None&&m===b.None:return b.None;case v===b.Both||m===b.Both:return b.Both;default:return b.EntitiesOnly}}function r(n,c){n.sort(e);for(var i=[],o=0,r=0;o<n.length&&r<c.ids.length;){var a=n[o],s=p(a,t),u=c.ids[r];e(a,c.entities[u])<=0?(i.push(s),o++):(i.push(u),r++)}c.ids=i.concat(o<n.length?n.slice(o).map(t):c.ids.slice(r)),n.forEach((function(e,n){c.entities[t(e)]=e}))}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:f((function(t,e){return c([t],e)})),updateOne:f((function(t,e){return i([t],e)})),upsertOne:f((function(t,e){return o([t],e)})),addAll:f((function(t,e){return e.entities={},e.ids=[],c(t,e),b.Both})),addMany:f(c),updateMany:f(i),upsertMany:f(o),map:f((function(t,e){return i(e.ids.reduce((function(n,c){var i=t(e.entities[c]);return i!==e.entities[c]&&n.push({id:c,changes:i}),n}),[]),e)}))}}(n,c):d(n);return Object(s.a)({selectId:n,sortComparer:c},i,o,r)}({selectId:function(t){return t.id},sortComparer:!1}),$=F.getInitialState({page:1,per_page:6,total:0,total_pages:0,filter:""}),T=Object(u.q)($,Object(u.s)(j,(function(t,e){var n=e.response,c=n.page,i=n.per_page,o=n.total,r=n.total_pages,a=n.data,u=Object(s.a)(Object(s.a)({},t),{page:c,per_page:i,total:o,total_pages:r});return F.addAll(a,u)})),Object(u.s)(C,(function(t,e){return F.upsertOne(e.contact,t)})),Object(u.s)(M,(function(t,e){return F.addOne(e.contact,t)})),Object(u.s)(L,(function(t,e){var n=e.contact;return F.updateOne({id:n.id,changes:n},t)})),Object(u.s)(w,(function(t,e){return F.removeOne(e.id,t)})),Object(u.s)(y,(function(t,e){var n=e.filter;return Object(s.a)(Object(s.a)({},t),{filter:n})})));function x(t,e){return Object(u.m)({contacts:T})(t,e)}var k=Object(u.p)("contacts"),E=Object(u.r)(k,(function(t){return t.contacts})),N=F.getSelectors(E).selectAll,_=Object(u.p)("contacts"),D=Object(u.r)(_,(function(t){var e=t.contacts;return{page:e.page,per_page:e.per_page,total:e.total,total_pages:e.total_pages}})),B=Object(u.r)(_,(function(t){return t.contacts.filter})),A=function(){function t(t){this.store=t,this.contacts$=this.store.pipe(Object(u.u)(N)),this.contactsPageInfo$=this.store.pipe(Object(u.u)(D)),this.filter$=this.store.pipe(Object(u.u)(B))}return t.prototype.loadContact=function(t){this.store.dispatch(h({id:t}))},t.prototype.createContact=function(t){this.store.dispatch(m({contact:t}))},t.prototype.updateContact=function(t){this.store.dispatch(v({contact:t}))},t.prototype.deleteContact=function(t){this.store.dispatch(g({id:t}))},t.prototype.pageChange=function(t){this.store.dispatch(O({page:t}))},t.prototype.filterContacts=function(t){this.store.dispatch(y({filter:t}))},t.prototype.getContactById=function(t){return this.store.pipe(Object(u.u)(function(t){return Object(u.r)(E,function(t){return function(e){return e.entities[t]}}(t))}(t)))},t.\u0275fac=function(e){return new(e||t)(r.Qb(u.h))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t}(),S=n("gIcY"),z=function(){function t(t){var e,n,c,i;this.formBuilder=t,this.contact={id:void 0,first_name:"",last_name:"",email:"",avatar:""},this.save=new r.n,this.form=this.formBuilder.group({id:[this.contact.id],first_name:[(null===(e=this.contact)||void 0===e?void 0:e.first_name)||"",S.h.required],last_name:[(null===(n=this.contact)||void 0===n?void 0:n.last_name)||"",S.h.required],email:[(null===(c=this.contact)||void 0===c?void 0:c.email)||"",S.h.required],avatar:[(null===(i=this.contact)||void 0===i?void 0:i.avatar)||""]})}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){this.contact&&this.form.patchValue(Object(s.a)({},this.contact))},t.prototype.submit=function(){this.form.valid&&this.save.emit(this.form.value)},t.\u0275fac=function(e){return new(e||t)(r.Jb(S.b))},t.\u0275cmp=r.Db({type:t,selectors:[["app-contact-form"]],inputs:{contact:"contact"},outputs:{save:"save"},features:[r.xb()],decls:20,vars:2,consts:[[1,"form",3,"formGroup","submit"],[1,"form-group"],["for","name-input"],["id","name-input","type","text","formControlName","first_name",1,"form-control"],["id","name-input","type","text","formControlName","last_name",1,"form-control"],["for","email-input"],["id","email-input","type","email","formControlName","email",1,"form-control"],["id","email-input","type","email","formControlName","avatar",1,"form-control"],["type","submit",1,"btn","btn-success","float-right",3,"disabled"]],template:function(t,e){1&t&&(r.Mb(0,"form",0),r.Ub("submit",(function(t){return e.submit()})),r.Mb(1,"div",1),r.Mb(2,"label",2),r.mc(3,"First Name:"),r.Lb(),r.Kb(4,"input",3),r.Lb(),r.Mb(5,"div",1),r.Mb(6,"label",2),r.mc(7,"Last Name:"),r.Lb(),r.Kb(8,"input",4),r.Lb(),r.Mb(9,"div",1),r.Mb(10,"label",5),r.mc(11,"Email:"),r.Lb(),r.Kb(12,"input",6),r.Lb(),r.Mb(13,"div",1),r.Mb(14,"label",5),r.mc(15,"Avatar:"),r.Lb(),r.Kb(16,"input",7),r.Lb(),r.Mb(17,"div",1),r.Mb(18,"button",8),r.mc(19," Submit "),r.Lb(),r.Lb(),r.Lb()),2&t&&(r.ac("formGroup",e.form),r.zb(18),r.ac("disabled",!e.form.valid))},directives:[S.i,S.f,S.d,S.a,S.e,S.c],styles:[".form[_ngcontent-%COMP%]{-webkit-animation:fadeIn .6s;animation:fadeIn .6s}"],changeDetection:0}),t}(),U=function(){function t(t,e){this.contactsFacade=t,this.router=e}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.submitted=function(t){this.contactsFacade.createContact(t),this.router.navigate(["/contacts"])},t.\u0275fac=function(e){return new(e||t)(r.Jb(A),r.Jb(o.b))},t.\u0275cmp=r.Db({type:t,selectors:[["app-contact-new"]],decls:5,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"save"]],template:function(t,e){1&t&&(r.Mb(0,"div",0),r.Mb(1,"div",1),r.mc(2," New Contact "),r.Lb(),r.Mb(3,"div",2),r.Mb(4,"app-contact-form",3),r.Ub("save",(function(t){return e.submitted(t)})),r.Lb(),r.Lb(),r.Lb())},directives:[z],styles:[""],changeDetection:0}),t}(),J=n("S5bw");function Y(t,e,n){var c;return c=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,c=t.bufferSize,i=void 0===c?Number.POSITIVE_INFINITY:c,o=t.windowTime,r=void 0===o?Number.POSITIVE_INFINITY:o,a=t.refCount,s=t.scheduler,u=0,b=!1,f=!1;return function(t){u++,e&&!b||(b=!1,e=new J.a(i,r,s),n=t.subscribe({next:function(t){e.next(t)},error:function(t){b=!0,e.error(t)},complete:function(){f=!0,n=void 0,e.complete()}}));var c=e.subscribe(this);this.add((function(){u--,c.unsubscribe(),n&&!f&&a&&0===u&&(n.unsubscribe(),n=void 0,e=void 0)}))}}(c))}}var P=n("67Y/"),R=n("dzgT"),X=n("bne5"),K=n("Gi3i"),W=n("VnD/"),V=n("ad02"),G=["filterInput"],H=function(){function t(){this.filterText="",this.onFilter=new r.n}return t.prototype.ngAfterViewInit=function(){var t=this;this.input.nativeElement.value=this.filterText,this.search$=Object(X.a)(this.input.nativeElement,"keyup").pipe(Object(P.a)((function(t){return t.target.value})),Object(K.a)(500),Object(W.a)((function(t){var e;return 1!==(null===(e=t)||void 0===e?void 0:e.length)})),Object(V.a)()),this.sub=this.search$.subscribe((function(e){return t.onFilter.emit(e)}))},t.prototype.ngOnDestroy=function(){var t;null===(t=this.sub)||void 0===t||t.unsubscribe()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["filter-input"]],viewQuery:function(t,e){var n;1&t&&r.jc(G,!0),2&t&&r.dc(n=r.Vb())&&(e.input=n.first)},inputs:{filterText:"filterText"},outputs:{onFilter:"onFilter"},decls:3,vars:0,consts:[[1,"input-group"],["type","text","placeholder","Filter contacts",1,"form-control"],["filterInput",""]],template:function(t,e){1&t&&(r.Mb(0,"div",0),r.Kb(1,"input",1,2),r.Lb())},styles:["[_nghost-%COMP%]{\n            display:flex;\n        }"]}),t}(),Q=function(){function t(){}return t.prototype.transform=function(t,e){if(!e)return t;var n=new RegExp(e,"gi"),c=t.match(n);return c?t.replace(n,'<mark class="bg-info text-light">'+c[0]+"</mark>"):t},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Ib({name:"highlighter",type:t,pure:!0}),t}();function Z(t,e){if(1&t){var n=r.Nb();r.Mb(0,"tr",5),r.Mb(1,"th",6),r.mc(2),r.Lb(),r.Kb(3,"td",7),r.Xb(4,"highlighter"),r.Kb(5,"td",7),r.Xb(6,"highlighter"),r.Kb(7,"td",7),r.Xb(8,"highlighter"),r.Kb(9,"td",7),r.Xb(10,"highlighter"),r.Mb(11,"td"),r.Mb(12,"span",8),r.Mb(13,"button",9),r.Ub("click",(function(t){r.fc(n);var c=e.$implicit;return r.Wb(2).showDetails(c)})),r.mc(14," DETAILS "),r.Lb(),r.Mb(15,"button",9),r.Ub("click",(function(t){r.fc(n);var c=e.$implicit;return r.Wb(2).editContact(c)})),r.mc(16," EDIT "),r.Lb(),r.Mb(17,"button",10),r.Ub("click",(function(t){r.fc(n);var c=e.$implicit;return r.Wb(2).deleteContact(c)})),r.mc(18," DELETE "),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&t){var c=e.$implicit,i=r.Wb(2);r.zb(2),r.nc(c.id),r.zb(1),r.ac("innerHTML",r.Zb(4,5,c.first_name,i.highlightText),r.gc),r.zb(2),r.ac("innerHTML",r.Zb(6,8,c.last_name,i.highlightText),r.gc),r.zb(2),r.ac("innerHTML",r.Zb(8,11,c.email,i.highlightText),r.gc),r.zb(2),r.ac("innerHTML",r.Zb(10,14,c.avatar,i.highlightText),r.gc)}}function q(t,e){if(1&t&&(r.Mb(0,"table",2),r.Mb(1,"thead",3),r.Mb(2,"tr"),r.Mb(3,"th"),r.mc(4,"#"),r.Lb(),r.Mb(5,"th"),r.mc(6,"First Name"),r.Lb(),r.Mb(7,"th"),r.mc(8,"Last Name"),r.Lb(),r.Mb(9,"th"),r.mc(10,"Email"),r.Lb(),r.Mb(11,"th"),r.mc(12,"Avatar"),r.Lb(),r.Kb(13,"th"),r.Lb(),r.Lb(),r.Mb(14,"tbody"),r.kc(15,Z,19,17,"tr",4),r.Lb(),r.Lb()),2&t){var n=r.Wb();r.zb(15),r.ac("ngForOf",n.contacts)("ngForTrackBy",n.contactsTrackByFn)}}function tt(t,e){1&t&&(r.Mb(0,"span"),r.mc(1,"loading contacts..."),r.Lb())}var et=function(){function t(){this.highlightText="",this.edit=new r.n,this.show=new r.n,this.remove=new r.n,this.contactsTrackByFn=function(t,e){return e.id}}return t.prototype.ngOnInit=function(){},t.prototype.showDetails=function(t){this.show.emit(t)},t.prototype.editContact=function(t){this.edit.emit(t)},t.prototype.deleteContact=function(t){this.remove.emit(t)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-contact-list"]],inputs:{contacts:"contacts",highlightText:"highlightText"},outputs:{edit:"edit",show:"show",remove:"remove"},decls:3,vars:2,consts:[["class","table table-hover table-responsive-md",4,"ngIf","ngIfElse"],["loading",""],[1,"table","table-hover","table-responsive-md"],[1,"header"],["class","contact-row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"contact-row"],["scope","row"],[3,"innerHTML"],[1,"float-right"],[1,"btn","btn-outline-primary","mb-1","btn-sm",3,"click"],[1,"btn","btn-outline-danger","mb-1","btn-sm",3,"click"]],template:function(t,e){if(1&t&&(r.kc(0,q,16,2,"table",0),r.kc(1,tt,2,0,"ng-template",null,1,r.lc)),2&t){var n=r.ec(2);r.ac("ngIf",e.contacts)("ngIfElse",n)}},directives:[c.k,c.j],pipes:[Q],styles:[".contact-row[_ngcontent-%COMP%]{-webkit-animation:fadeIn .6s;animation:fadeIn .6s}.header[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t}(),nt=function(t,e){return{"btn-primary":t,"btn-secondary":e}};function ct(t,e){if(1&t){var n=r.Nb();r.Mb(0,"button",6),r.Ub("click",(function(t){r.fc(n);var c=e.$implicit;return r.Wb(2).changePage(c)})),r.Xb(1,"async"),r.Xb(2,"async"),r.mc(3),r.Lb()}if(2&t){var c=e.$implicit,i=r.Wb(2);r.ac("ngClass",r.cc(6,nt,r.Yb(1,2,i.current_page$)===c,r.Yb(2,4,i.current_page$)!==c)),r.zb(3),r.oc(" Page ",c," ")}}function it(t,e){if(1&t&&(r.Mb(0,"div",4),r.kc(1,ct,4,9,"button",5),r.Lb()),2&t){var n=e.ngIf;r.zb(1),r.ac("ngForOf",n)}}var ot=function(){function t(t,e){this.contactsFacade=t,this.router=e,this.contacts$=this.contactsFacade.contacts$,this.pageInfo$=this.contactsFacade.contactsPageInfo$,this.filter$=this.contactsFacade.filter$.pipe(Y(1)),this.pages$=this.pageInfo$.pipe(Object(P.a)((function(t){return Array.from({length:t.total_pages||0},(function(t,e){return e+1}))}))),this.current_page$=this.pageInfo$.pipe(Object(P.a)((function(t){return t.page})),Y(1)),this.filteredContacts$=Object(R.a)([this.contacts$,this.filter$]).pipe(Object(P.a)((function(t){var e,n=t[0],c=t[1];return c&&(null===(e=n)||void 0===e?void 0:e.length)?n.filter((function(t){return(t.first_name+"."+t.last_name+"."+t.email+"."+t.avatar).includes(c)})):n})))}return t.prototype.ngOnInit=function(){},t.prototype.editContact=function(t){this.router.navigate(["/contacts",t.id,"edit"])},t.prototype.showContact=function(t){this.router.navigate(["/contacts",t.id])},t.prototype.deleteContact=function(t){confirm("Are you sure?")&&this.contactsFacade.deleteContact(t.id)},t.prototype.changePage=function(t){this.contactsFacade.pageChange(t)},t.prototype.filterContacts=function(t){this.contactsFacade.filterContacts(t)},t.\u0275fac=function(e){return new(e||t)(r.Jb(A),r.Jb(o.b))},t.\u0275cmp=r.Db({type:t,selectors:[["app-contacts-index"]],decls:10,vars:12,consts:[[1,"d-flex","flex-row","justify-content-between","align-items-end"],["class","d-flex",4,"ngIf"],[1,"mt-4",3,"filterText","onFilter"],[3,"contacts","highlightText","show","remove","edit"],[1,"d-flex"],["type","button","class","btn",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"ngClass","click"]],template:function(t,e){1&t&&(r.Mb(0,"div",0),r.Mb(1,"h1"),r.mc(2,"Contact list"),r.Lb(),r.kc(3,it,2,1,"div",1),r.Xb(4,"async"),r.Lb(),r.Mb(5,"filter-input",2),r.Ub("onFilter",(function(t){return e.filterContacts(t)})),r.Xb(6,"async"),r.Lb(),r.Mb(7,"app-contact-list",3),r.Ub("show",(function(t){return e.showContact(t)}))("remove",(function(t){return e.deleteContact(t)}))("edit",(function(t){return e.editContact(t)})),r.Xb(8,"async"),r.Xb(9,"async"),r.Lb()),2&t&&(r.zb(3),r.ac("ngIf",r.Yb(4,4,e.pages$)),r.zb(2),r.ac("filterText",r.Yb(6,6,e.filter$)),r.zb(2),r.ac("contacts",r.Yb(8,8,e.filteredContacts$))("highlightText",r.Yb(9,10,e.filter$)))},directives:[c.k,H,et,c.j,c.i],pipes:[c.b],styles:[""],changeDetection:0}),t}(),rt=n("15JJ"),at=n("w1ql"),st=n("F/XL"),ut=n("p0Sj"),bt=n("FYXD"),ft=n("9Z1F"),pt=n("6V3w"),dt=n("AytR"),lt=n("t/Na"),ht=function(){function t(t){this.http=t}return t.prototype.index=function(t){return void 0===t&&(t=1),this.http.get(dt.a.appApi.baseUrl+"/api/users?page="+t)},t.prototype.show=function(t){return this.http.get(dt.a.appApi.baseUrl+"/api/users/"+t)},t.prototype.create=function(t){return this.http.post(dt.a.appApi.baseUrl+"/api/users",t)},t.prototype.update=function(t){return this.http.patch(dt.a.appApi.baseUrl+"/api/users/"+t.id,t)},t.prototype.destroy=function(t){return this.http.delete(dt.a.appApi.baseUrl+"/api/users/"+t)},t.\u0275fac=function(e){return new(e||t)(r.Qb(lt.a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t}(),mt=function(){function t(t,e){var n=this;this.actions$=t,this.contactsService=e,this.loadAll$=Object(at.c)((function(){return n.actions$.pipe(Object(at.d)(l),Object(ut.a)(l()),Object(rt.a)((function(){return n.contactsService.index().pipe(Object(P.a)((function(t){return j({response:t})})))})))})),this.pageChange$=Object(at.c)((function(){return n.actions$.pipe(Object(at.d)(O),Object(bt.a)("page"),Object(rt.a)((function(t){return n.contactsService.index(t).pipe(Object(P.a)((function(t){return j({response:t})})))})))})),this.load$=Object(at.c)((function(){return n.actions$.pipe(Object(at.d)(h),Object(bt.a)("id"),Object(rt.a)((function(t){return n.contactsService.show(t).pipe(Object(P.a)((function(t){return C({contact:t.data})})))})))})),this.create$=Object(at.c)((function(){return n.actions$.pipe(Object(at.d)(m),Object(bt.a)("contact"),Object(rt.a)((function(t){return n.contactsService.create(t).pipe(Object(P.a)((function(t){return M({contact:t})})),Object(ft.a)((function(t){return alert(t.message),Object(st.a)(I({err:{concern:"CREATE",error:t}}))})))})))})),this.update$=Object(at.c)((function(){return n.actions$.pipe(Object(at.d)(v),Object(bt.a)("contact"),Object(pt.a)((function(t){return n.contactsService.update(t).pipe(Object(P.a)((function(t){return L({contact:t})})))})))})),this.destroy$=Object(at.c)((function(){return n.actions$.pipe(Object(at.d)(g),Object(bt.a)("id"),Object(rt.a)((function(t){return n.contactsService.destroy(t).pipe(Object(P.a)((function(){return w({id:t})})))})))}))}return t.\u0275fac=function(e){return new(e||t)(r.Qb(at.a),r.Qb(ht))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t}();function vt(t,e){if(1&t){var n=r.Nb();r.Mb(0,"div",1),r.Mb(1,"div",2),r.Mb(2,"div",3),r.mc(3," Contact "),r.Lb(),r.Mb(4,"div",4),r.Mb(5,"p"),r.mc(6,"First Name: "),r.Mb(7,"span",5),r.mc(8),r.Lb(),r.Lb(),r.Mb(9,"p"),r.mc(10,"First Name: "),r.Mb(11,"span",5),r.mc(12),r.Lb(),r.Lb(),r.Mb(13,"p"),r.mc(14,"Email: "),r.Mb(15,"span",5),r.mc(16),r.Lb(),r.Lb(),r.Mb(17,"p"),r.mc(18,"Avatar: "),r.Mb(19,"span",5),r.mc(20),r.Lb(),r.Lb(),r.Lb(),r.Mb(21,"div",6),r.Mb(22,"span",7),r.Mb(23,"button",8),r.Ub("click",(function(t){r.fc(n);var e=r.Wb();return e.edit.emit(e.contact)})),r.mc(24," EDIT"),r.Lb(),r.Mb(25,"button",9),r.Ub("click",(function(t){r.fc(n);var e=r.Wb();return e.remove.emit(e.contact)})),r.mc(26," DELETE"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&t){var c=r.Wb();r.zb(8),r.nc(c.contact.first_name),r.zb(4),r.nc(c.contact.last_name),r.zb(4),r.nc(c.contact.email),r.zb(4),r.nc(c.contact.avatar)}}var gt=function(){function t(){this.edit=new r.n,this.remove=new r.n}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-contact-details-container"]],inputs:{contact:"contact"},outputs:{edit:"edit",remove:"remove"},decls:1,vars:1,consts:[["class","contact-details-container",4,"ngIf"],[1,"contact-details-container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"badge","badge-primary"],[1,"card-footer","text-muted"],[1,"float-md-right"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(t,e){1&t&&r.kc(0,vt,27,4,"div",0),2&t&&r.ac("ngIf",e.contact)},directives:[c.k],styles:[".contact-details-container[_ngcontent-%COMP%]{-webkit-animation:fadeIn .6s;animation:fadeIn .6s}"],changeDetection:0}),t}(),Ot=function(){function t(t,e,n,c){var i=this;this.activatedRoute=t,this.router=e,this.contactsFacade=n,this.contactsEffects=c,this.contact$=this.activatedRoute.params.pipe(Object(P.a)((function(t){return t.contactId})),Object(rt.a)((function(t){return i.contactsFacade.getContactById(t)})))}return t.prototype.ngOnInit=function(){var t=this;this.redirectSub=this.contactsEffects.destroy$.pipe(Object(W.a)((function(e){return e.id===+t.activatedRoute.snapshot.params.contactId}))).subscribe((function(e){return t.router.navigate(["/contacts"])})),this.activatedRoute.params.subscribe((function(e){t.contactsFacade.loadContact(+e.contactId)}))},t.prototype.editContact=function(t){this.router.navigate(["/contacts",t.id,"edit"])},t.prototype.deleteContact=function(t){confirm("Are you sure?")&&this.contactsFacade.deleteContact(t.id)},t.prototype.ngOnDestroy=function(){this.redirectSub.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(r.Jb(o.a),r.Jb(o.b),r.Jb(A),r.Jb(mt))},t.\u0275cmp=r.Db({type:t,selectors:[["app-contact-details"]],decls:2,vars:3,consts:[[3,"contact","edit","remove"]],template:function(t,e){1&t&&(r.Mb(0,"app-contact-details-container",0),r.Ub("edit",(function(t){return e.editContact(t)}))("remove",(function(t){return e.deleteContact(t)})),r.Xb(1,"async"),r.Lb()),2&t&&r.ac("contact",r.Yb(1,1,e.contact$))},directives:[gt],pipes:[c.b],styles:[""],changeDetection:0}),t}(),yt=function(){function t(t,e,n,c){var i=this;this.activatedRoute=t,this.router=e,this.contactsFacade=n,this.contactsEffects=c,this.contact$=this.activatedRoute.params.pipe(Object(P.a)((function(t){return t.contactId})),Object(rt.a)((function(t){return i.contactsFacade.getContactById(t)})))}return t.prototype.ngOnInit=function(){var t=this;this.redirectSub=this.contactsEffects.update$.pipe(Object(W.a)((function(e){return e.contact.id===+t.activatedRoute.snapshot.params.contactId}))).subscribe((function(e){return t.router.navigate(["/contacts",e.contact.id])})),this.activatedRoute.params.subscribe((function(e){t.contactsFacade.loadContact(+e.contactId)}))},t.prototype.ngOnDestroy=function(){this.redirectSub.unsubscribe()},t.prototype.submitted=function(t){this.contactsFacade.updateContact(t)},t.\u0275fac=function(e){return new(e||t)(r.Jb(o.a),r.Jb(o.b),r.Jb(A),r.Jb(mt))},t.\u0275cmp=r.Db({type:t,selectors:[["app-contact-edit"]],decls:6,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"contact","save"]],template:function(t,e){1&t&&(r.Mb(0,"div",0),r.Mb(1,"div",1),r.mc(2," Edit Contact "),r.Lb(),r.Mb(3,"div",2),r.Mb(4,"app-contact-form",3),r.Ub("save",(function(t){return e.submitted(t)})),r.Xb(5,"async"),r.Lb(),r.Lb(),r.Lb()),2&t&&(r.zb(4),r.ac("contact",r.Yb(5,1,e.contact$)))},directives:[z],pipes:[c.b],styles:[""],changeDetection:0}),t}(),jt=n("sIm4"),Ct=function(){function t(t){this.store=t}return t.prototype.resolve=function(t,e){return this.store.dispatch(Object(jt.a)({payload:t.data.title})),Object(st.a)(t.data.title)},t.\u0275fac=function(e){return new(e||t)(r.Qb(u.h))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Mt=[{path:"",component:a,children:[{path:"",component:ot,data:{title:"Contacts index"},resolve:{title:Ct}},{path:"new",component:U,data:{title:"New contact"},resolve:{title:Ct}},{path:":contactId",component:Ot,data:{title:"Contact details"},resolve:{title:Ct}},{path:":contactId/edit",component:yt,data:{title:"Edit contact"},resolve:{title:Ct}}]}],Lt=function(){function t(){}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(Mt)],o.f]}),t}();n.d(e,"ContactsModule",(function(){return wt}));var wt=function(){function t(){}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[ht,A],imports:[[c.c,i.a,Lt,u.j.forFeature("contacts",x),at.b.forFeature([mt])]]}),t}()}}]);